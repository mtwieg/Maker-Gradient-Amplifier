Version 4
SHEET 1 4328 1268
WIRE 4320 -400 0 -400
WIRE 480 -352 464 -352
WIRE 576 -352 560 -352
WIRE 1200 -352 1184 -352
WIRE 1296 -352 1280 -352
WIRE 1952 -352 1936 -352
WIRE 2048 -352 2032 -352
WIRE 2688 -352 2672 -352
WIRE 2784 -352 2768 -352
WIRE 448 -256 448 -352
WIRE 448 -256 432 -256
WIRE 464 -256 448 -256
WIRE 576 -256 576 -352
WIRE 576 -256 544 -256
WIRE 592 -256 576 -256
WIRE 1168 -256 1168 -352
WIRE 1168 -256 1152 -256
WIRE 1184 -256 1168 -256
WIRE 1296 -256 1296 -352
WIRE 1296 -256 1264 -256
WIRE 1312 -256 1296 -256
WIRE 1920 -256 1920 -352
WIRE 1920 -256 1904 -256
WIRE 1936 -256 1920 -256
WIRE 2048 -256 2048 -352
WIRE 2048 -256 2016 -256
WIRE 2064 -256 2048 -256
WIRE 2656 -256 2656 -352
WIRE 2656 -256 2640 -256
WIRE 2672 -256 2656 -256
WIRE 2784 -256 2784 -352
WIRE 2784 -256 2752 -256
WIRE 2800 -256 2784 -256
WIRE 512 -176 464 -176
WIRE 544 -176 512 -176
WIRE 592 -176 592 -256
WIRE 592 -176 544 -176
WIRE 640 -176 592 -176
WIRE 672 -176 640 -176
WIRE 704 -176 672 -176
WIRE 752 -176 704 -176
WIRE 1232 -176 1184 -176
WIRE 1264 -176 1232 -176
WIRE 1312 -176 1312 -256
WIRE 1312 -176 1264 -176
WIRE 1360 -176 1312 -176
WIRE 1392 -176 1360 -176
WIRE 1424 -176 1392 -176
WIRE 1472 -176 1424 -176
WIRE 1984 -176 1936 -176
WIRE 2064 -176 2064 -256
WIRE 2064 -176 1984 -176
WIRE 2112 -176 2064 -176
WIRE 2176 -176 2112 -176
WIRE 2224 -176 2176 -176
WIRE 2720 -176 2672 -176
WIRE 2752 -176 2720 -176
WIRE 2800 -176 2800 -256
WIRE 2800 -176 2752 -176
WIRE 2848 -176 2800 -176
WIRE 2880 -176 2848 -176
WIRE 2912 -176 2880 -176
WIRE 2960 -176 2912 -176
WIRE 2176 -160 2176 -176
WIRE 2176 -160 2144 -160
WIRE 464 -144 464 -176
WIRE 752 -144 752 -176
WIRE 1184 -144 1184 -176
WIRE 1472 -144 1472 -176
WIRE 1936 -144 1936 -176
WIRE 1984 -144 1984 -176
WIRE 2016 -144 1984 -144
WIRE 2144 -144 2144 -160
WIRE 2176 -144 2176 -160
WIRE 2224 -144 2224 -176
WIRE 2672 -144 2672 -176
WIRE 2960 -144 2960 -176
WIRE 512 -128 512 -176
WIRE 704 -128 704 -176
WIRE 1232 -128 1232 -176
WIRE 1424 -128 1424 -176
WIRE 1984 -128 1984 -144
WIRE 2016 -128 2016 -144
WIRE 2720 -128 2720 -176
WIRE 2912 -128 2912 -176
WIRE 3408 -112 3296 -112
WIRE 3552 -112 3488 -112
WIRE 3680 -112 3632 -112
WIRE 3760 -112 3680 -112
WIRE 3856 -112 3760 -112
WIRE 4016 -112 3856 -112
WIRE 4112 -112 4016 -112
WIRE 2176 -80 2144 -80
WIRE 4112 -80 4112 -112
WIRE 512 -64 464 -64
WIRE 544 -64 544 -112
WIRE 544 -64 512 -64
WIRE 672 -64 672 -112
WIRE 704 -64 672 -64
WIRE 752 -64 704 -64
WIRE 1232 -64 1184 -64
WIRE 1264 -64 1264 -112
WIRE 1264 -64 1232 -64
WIRE 1392 -64 1392 -112
WIRE 1424 -64 1392 -64
WIRE 1472 -64 1424 -64
WIRE 1984 -64 1936 -64
WIRE 2016 -64 1984 -64
WIRE 2176 -64 2176 -80
WIRE 2224 -64 2176 -64
WIRE 2720 -64 2672 -64
WIRE 2752 -64 2752 -112
WIRE 2752 -64 2720 -64
WIRE 2880 -64 2880 -112
WIRE 2912 -64 2880 -64
WIRE 2960 -64 2912 -64
WIRE 4016 -64 4016 -112
WIRE 3680 -48 3680 -112
WIRE 592 -32 592 -96
WIRE 640 -32 640 -176
WIRE 1312 -32 1312 -96
WIRE 1360 -32 1360 -176
WIRE 2064 -32 2064 -96
WIRE 2112 -32 2112 -176
WIRE 2800 -32 2800 -96
WIRE 2848 -32 2848 -176
WIRE 3760 -16 3760 -32
WIRE 464 16 464 -64
WIRE 464 16 336 16
WIRE 752 16 752 -64
WIRE 896 16 752 16
WIRE 944 16 896 16
WIRE 1088 16 1024 16
WIRE 1184 16 1184 -64
WIRE 1184 16 1088 16
WIRE 1472 16 1472 -64
WIRE 1568 16 1472 16
WIRE 1648 16 1568 16
WIRE 1840 16 1728 16
WIRE 1936 16 1936 -64
WIRE 1936 16 1840 16
WIRE 2224 16 2224 -64
WIRE 2320 16 2224 16
WIRE 2400 16 2320 16
WIRE 2576 16 2480 16
WIRE 2672 16 2672 -64
WIRE 2672 16 2576 16
WIRE 2960 16 2960 -64
WIRE 3056 16 2960 16
WIRE 4016 32 4016 16
WIRE 4112 32 4112 -16
WIRE 4112 32 4016 32
WIRE 464 64 464 16
WIRE 512 64 464 64
WIRE 544 64 512 64
WIRE 704 64 672 64
WIRE 752 64 752 16
WIRE 752 64 704 64
WIRE 1184 64 1184 16
WIRE 1232 64 1184 64
WIRE 1264 64 1232 64
WIRE 1424 64 1392 64
WIRE 1472 64 1472 16
WIRE 1472 64 1424 64
WIRE 1936 64 1936 16
WIRE 1984 64 1936 64
WIRE 2016 64 1984 64
WIRE 2176 64 2144 64
WIRE 2224 64 2224 16
WIRE 2224 64 2176 64
WIRE 2672 64 2672 16
WIRE 2720 64 2672 64
WIRE 2752 64 2720 64
WIRE 2912 64 2880 64
WIRE 2960 64 2960 16
WIRE 2960 64 2912 64
WIRE 512 80 512 64
WIRE 544 80 544 64
WIRE 672 80 672 64
WIRE 704 80 704 64
WIRE 1232 80 1232 64
WIRE 1264 80 1264 64
WIRE 1392 80 1392 64
WIRE 1424 80 1424 64
WIRE 1984 80 1984 64
WIRE 2016 80 2016 64
WIRE 2144 80 2144 64
WIRE 2176 80 2176 64
WIRE 2720 80 2720 64
WIRE 2752 80 2752 64
WIRE 2880 80 2880 64
WIRE 2912 80 2912 64
WIRE 3408 128 3296 128
WIRE 3552 128 3488 128
WIRE 3680 128 3680 16
WIRE 3680 128 3632 128
WIRE 3760 128 3760 48
WIRE 3760 128 3680 128
WIRE 3920 128 3760 128
WIRE 4016 128 4016 112
WIRE 4016 128 3920 128
WIRE 512 144 464 144
WIRE 544 144 512 144
WIRE 592 144 592 32
WIRE 592 144 544 144
WIRE 640 144 640 32
WIRE 640 144 592 144
WIRE 672 144 640 144
WIRE 704 144 672 144
WIRE 752 144 704 144
WIRE 1232 144 1184 144
WIRE 1264 144 1232 144
WIRE 1312 144 1312 32
WIRE 1312 144 1264 144
WIRE 1360 144 1360 32
WIRE 1360 144 1312 144
WIRE 1392 144 1360 144
WIRE 1424 144 1392 144
WIRE 1472 144 1424 144
WIRE 1984 144 1936 144
WIRE 2016 144 1984 144
WIRE 2064 144 2064 32
WIRE 2064 144 2016 144
WIRE 2112 144 2112 32
WIRE 2112 144 2064 144
WIRE 2144 144 2112 144
WIRE 2176 144 2144 144
WIRE 2224 144 2176 144
WIRE 2720 144 2672 144
WIRE 2752 144 2720 144
WIRE 2800 144 2800 32
WIRE 2800 144 2752 144
WIRE 2848 144 2848 32
WIRE 2848 144 2800 144
WIRE 2880 144 2848 144
WIRE 2912 144 2880 144
WIRE 2960 144 2912 144
WIRE 3856 160 3856 -112
WIRE 3920 160 3920 128
WIRE 448 208 432 208
WIRE 464 208 448 208
WIRE 560 208 544 208
WIRE 592 208 592 144
WIRE 592 208 560 208
WIRE 1168 208 1152 208
WIRE 1184 208 1168 208
WIRE 1280 208 1264 208
WIRE 1312 208 1312 144
WIRE 1312 208 1280 208
WIRE 1920 208 1904 208
WIRE 1936 208 1920 208
WIRE 2032 208 2016 208
WIRE 2064 208 2064 144
WIRE 2064 208 2032 208
WIRE 2656 208 2640 208
WIRE 2672 208 2656 208
WIRE 2768 208 2752 208
WIRE 2800 208 2800 144
WIRE 2800 208 2768 208
WIRE 448 272 448 208
WIRE 464 272 448 272
WIRE 560 272 560 208
WIRE 560 272 544 272
WIRE 1168 272 1168 208
WIRE 1184 272 1168 272
WIRE 1280 272 1280 208
WIRE 1280 272 1264 272
WIRE 1920 272 1920 208
WIRE 1936 272 1920 272
WIRE 2032 272 2032 208
WIRE 2032 272 2016 272
WIRE 2656 272 2656 208
WIRE 2672 272 2656 272
WIRE 2768 272 2768 208
WIRE 2768 272 2752 272
WIRE 0 368 0 -400
WIRE 1232 368 0 368
WIRE 1856 368 1232 368
WIRE 3184 368 1856 368
WIRE 4320 368 4320 -400
WIRE 4320 368 3184 368
WIRE 1536 528 1440 528
WIRE 3392 592 3392 560
WIRE 3488 592 3488 560
WIRE 3584 592 3584 560
WIRE 3680 592 3680 560
WIRE 3792 592 3792 528
WIRE 3888 592 3888 528
WIRE 4000 592 4000 528
WIRE 4096 592 4096 528
WIRE 1536 640 1536 528
WIRE 1536 640 1424 640
WIRE 1632 640 1536 640
WIRE 2096 640 2096 576
WIRE 2368 640 2368 576
WIRE 2656 640 2656 576
WIRE 2992 640 2992 576
WIRE 1424 736 1424 720
WIRE 1632 736 1632 720
WIRE 2096 768 2096 720
WIRE 2096 768 1968 768
WIRE 2368 768 2368 720
WIRE 2368 768 2256 768
WIRE 2656 768 2656 720
WIRE 2656 768 2560 768
WIRE 2992 768 2992 720
WIRE 2992 768 2880 768
WIRE 1968 800 1968 768
WIRE 2096 800 2096 768
WIRE 2256 800 2256 768
WIRE 2368 800 2368 768
WIRE 2560 800 2560 768
WIRE 2656 800 2656 768
WIRE 2880 800 2880 768
WIRE 2992 800 2992 768
WIRE 3792 864 3792 800
WIRE 3888 864 3888 800
WIRE 4000 864 4000 800
WIRE 4096 864 4096 800
WIRE 3392 880 3392 848
WIRE 3488 880 3488 848
WIRE 3584 880 3584 848
WIRE 3680 880 3680 848
WIRE 0 992 0 368
WIRE 1232 992 1232 368
WIRE 1232 992 0 992
WIRE 1856 992 1856 368
WIRE 1856 992 1232 992
WIRE 3184 992 3184 368
WIRE 3184 992 1856 992
WIRE 4320 992 4320 368
WIRE 4320 992 3184 992
WIRE 0 1040 0 992
FLAG 336 16 Vo1b
FLAG 896 16 Vo1a
FLAG 432 208 Vs1
FLAG 432 -256 Vd1
FLAG 1088 16 Vo2b
FLAG 1568 16 Vo2a
FLAG 1152 208 Vs2
FLAG 1152 -256 Vd2
FLAG 1840 16 Vo3b
FLAG 2320 16 Vo3a
FLAG 1904 208 Vs3
FLAG 1904 -256 Vd3
FLAG 2656 768 Vs3
FLAG 2656 576 Vd3
FLAG 2368 768 Vs2
FLAG 2368 576 Vd2
FLAG 2096 768 Vs1
FLAG 2096 576 Vd1
FLAG 1968 880 0
FLAG 3296 128 Vo4a
FLAG 3296 -112 Vo1b
FLAG 2096 864 0
FLAG 2368 864 0
FLAG 2656 864 0
FLAG 2256 880 0
FLAG 2560 880 0
FLAG 2576 16 Vo4b
FLAG 3056 16 Vo4a
FLAG 2640 208 Vs4
FLAG 2640 -256 Vd4
FLAG 2992 768 Vs4
FLAG 2992 576 Vd4
FLAG 2992 864 0
FLAG 2880 880 0
FLAG 3392 672 0
FLAG 3392 560 ramp1
FLAG 3488 672 0
FLAG 3488 560 ramp2
FLAG 3584 560 ramp3
FLAG 3680 560 ramp4
FLAG 1424 816 0
FLAG 1440 528 U
FLAG 1632 816 0
FLAG 3584 672 0
FLAG 3680 672 0
FLAG 3856 224 0
FLAG 3920 224 0
FLAG 3392 960 0
FLAG 3392 848 ramp1_del
FLAG 3488 960 0
FLAG 3488 848 ramp2_del
FLAG 3584 848 ramp3_del
FLAG 3680 848 ramp4_del
FLAG 3584 960 0
FLAG 3680 960 0
FLAG 3888 944 0
FLAG 3792 944 0
FLAG 3792 800 gateH_1
FLAG 3888 800 gateL_1
FLAG 416 128 0
FLAG 800 128 0
FLAG 800 -80 0
FLAG 416 -80 0
FLAG 416 80 gateH_1
FLAG 416 -128 gateL_1
FLAG 800 -128 gateH_1
FLAG 800 80 gateL_1
FLAG 4096 944 0
FLAG 4000 944 0
FLAG 4000 800 gateH_2
FLAG 4096 800 gateL_2
FLAG 1136 80 gateH_2
FLAG 1136 -80 0
FLAG 1520 -80 0
FLAG 1520 128 0
FLAG 1136 128 0
FLAG 1520 -128 gateH_2
FLAG 1520 80 gateL_2
FLAG 1136 -128 gateL_2
FLAG 3888 672 0
FLAG 3792 672 0
FLAG 3792 528 gateH_3
FLAG 3888 528 gateL_3
FLAG 4096 672 0
FLAG 4000 672 0
FLAG 4000 528 gateH_4
FLAG 4096 528 gateL_4
FLAG 1888 80 gateH_3
FLAG 2272 80 gateL_3
FLAG 2624 80 gateH_4
FLAG 3008 80 gateL_4
FLAG 1888 -80 0
FLAG 1888 128 0
FLAG 2272 128 0
FLAG 2272 -80 0
FLAG 2624 -80 0
FLAG 2624 128 0
FLAG 3008 128 0
FLAG 3008 -80 0
FLAG 1888 -128 gateL_3
FLAG 2272 -128 gateH_3
FLAG 2624 -128 gateL_4
FLAG 3008 -128 gateH_4
FLAG 0 1040 0
FLAG 4016 208 0
SYMBOL sw 464 160 M180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S1
SYMBOL sw 464 -48 M180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S2
SYMBOL sw 752 160 R180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S3
SYMBOL sw 752 -48 R180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S4
SYMBOL sw 1184 160 M180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S5
SYMBOL sw 1184 -48 M180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S6
SYMBOL sw 1472 160 R180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S7
SYMBOL sw 1472 -48 R180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S8
SYMBOL sw 1936 160 M180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S9
SYMBOL sw 1936 -48 M180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S10
SYMBOL sw 2224 160 R180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S11
SYMBOL sw 2224 -48 R180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S12
SYMBOL voltage 2656 624 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V7
SYMATTR Value {VDD}
SYMBOL voltage 2368 624 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V8
SYMATTR Value {VDD}
SYMBOL voltage 2096 624 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V9
SYMATTR Value {VDD}
SYMBOL res 1952 784 R0
SYMATTR InstName R1
SYMATTR Value 0.1Meg
SYMBOL res 1040 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1m
SYMBOL res 1744 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1m
SYMBOL cap 2080 800 R0
SYMATTR InstName C1
SYMATTR Value {C_PE}
SYMATTR SpiceLine Rser={C_PE_ESR}
SYMBOL cap 2352 800 R0
SYMATTR InstName C2
SYMATTR Value {C_PE}
SYMATTR SpiceLine Rser={C_PE_ESR}
SYMBOL cap 2640 800 R0
WINDOW 3 35 27 Left 2
SYMATTR InstName C3
SYMATTR Value {C_PE}
SYMATTR SpiceLine Rser={C_PE_ESR}
SYMBOL res 2240 784 R0
SYMATTR InstName R5
SYMATTR Value 0.1Meg
SYMBOL res 2544 784 R0
WINDOW 0 -21 29 Left 2
WINDOW 3 -61 60 Left 2
SYMATTR InstName R6
SYMATTR Value 0.1Meg
SYMBOL ind2 448 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value {Lcm}
SYMATTR Type ind
SYMATTR SpiceLine Rser={Lcm_ESR}
SYMBOL ind2 448 -240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value {Lcm}
SYMATTR Type ind
SYMATTR SpiceLine Rser={Lcm_ESR}
SYMBOL diode 560 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 688 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode 688 -112 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 560 -112 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL cap 576 -32 R0
WINDOW 3 -40 56 Left 2
SYMATTR Value {Cb1}
SYMATTR InstName C7
SYMBOL res 560 256 R90
WINDOW 0 23 133 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {Rcm_damp*2}
SYMBOL ind2 1168 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L6
SYMATTR Value {Lcm}
SYMATTR Type ind
SYMATTR SpiceLine Rser={Lcm_ESR}
SYMBOL ind2 1168 -240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L7
SYMATTR Value {Lcm}
SYMATTR Type ind
SYMATTR SpiceLine Rser={Lcm_ESR}
SYMBOL diode 1280 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D9
SYMBOL diode 1408 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D10
SYMBOL diode 1408 -112 R180
WINDOW 0 -16 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D11
SYMBOL diode 1280 -112 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D12
SYMBOL res 1280 256 R90
WINDOW 0 25 130 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {Rcm_damp*2}
SYMBOL ind2 1920 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L8
SYMATTR Value {Lcm}
SYMATTR Type ind
SYMATTR SpiceLine Rser={Lcm_ESR}
SYMBOL ind2 1920 -240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L9
SYMATTR Value {Lcm}
SYMATTR Type ind
SYMATTR SpiceLine Rser={Lcm_ESR}
SYMBOL diode 2032 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D13
SYMBOL res 2032 256 R90
WINDOW 0 23 141 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {Rcm_damp*2}
SYMBOL cap 1296 -32 R0
SYMATTR InstName C8
SYMATTR Value {Cb1}
SYMBOL cap 2048 -32 R0
SYMATTR InstName C9
SYMATTR Value {Cb1}
SYMBOL res 608 -80 R180
WINDOW 0 -13 -13 VRight 2
WINDOW 3 -13 23 VRight 2
SYMATTR InstName R8
SYMATTR Value {Cb1_ESR}
SYMBOL res 1328 -80 R180
WINDOW 0 -12 -25 VRight 2
WINDOW 3 -13 24 VRight 2
SYMATTR InstName R11
SYMATTR Value {Cb1_ESR}
SYMBOL res 2080 -80 R180
WINDOW 0 -6 -26 VRight 2
WINDOW 3 -13 21 VRight 2
SYMATTR InstName R12
SYMATTR Value {Cb1_ESR}
SYMBOL cap 624 -32 R0
WINDOW 3 23 49 Left 2
SYMATTR Value {Cb2}
SYMATTR InstName C10
SYMBOL cap 1344 -32 R0
SYMATTR InstName C11
SYMATTR Value {Cb2}
SYMBOL cap 2096 -32 R0
SYMATTR InstName C12
SYMATTR Value {Cb2}
SYMBOL sw 2672 160 M180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S13
SYMBOL sw 2672 -48 M180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S14
SYMBOL sw 2960 160 R180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S15
SYMBOL sw 2960 -48 R180
WINDOW 3 24 96 Invisible 2
SYMATTR Value MySwitch
SYMATTR InstName S16
SYMBOL ind2 2656 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value {Lcm}
SYMATTR Type ind
SYMATTR SpiceLine Rser={Lcm_ESR}
SYMBOL ind2 2656 -240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L5
SYMATTR Value {Lcm}
SYMATTR Type ind
SYMATTR SpiceLine Rser={Lcm_ESR}
SYMBOL diode 2768 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL diode 2896 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL diode 2896 -112 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMBOL diode 2768 -112 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMBOL res 2768 256 R90
WINDOW 0 20 141 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value {Rcm_damp*2}
SYMBOL cap 2784 -32 R0
WINDOW 3 -54 51 Left 2
SYMATTR Value {Cb1}
SYMATTR InstName C13
SYMBOL res 2816 -80 R180
WINDOW 0 -7 -16 VRight 2
WINDOW 3 -10 36 VRight 2
SYMATTR InstName R14
SYMATTR Value {Cb1_ESR}
SYMBOL cap 2832 -32 R0
WINDOW 3 24 50 Left 2
SYMATTR Value {Cb2}
SYMATTR InstName C14
SYMBOL voltage 2992 624 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V12
SYMATTR Value {VDD}
SYMBOL cap 2976 800 R0
SYMATTR InstName C15
SYMATTR Value {C_PE}
SYMATTR SpiceLine Rser={C_PE_ESR}
SYMBOL res 2864 784 R0
WINDOW 0 -37 66 Left 2
WINDOW 3 -66 92 Left 2
SYMATTR InstName R15
SYMATTR Value 0.1Meg
SYMBOL res 2496 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 1m
SYMBOL voltage 3392 576 R0
WINDOW 3 -130 128 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({-Vramp/2} {Vramp/2} 0 {0.5/f} {0.5/f} 0 {1/f})
SYMATTR InstName V13
SYMBOL voltage 3488 576 R0
WINDOW 3 -130 128 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({-Vramp/2} {Vramp/2} {1/(f*N)} {0.5/f} {0.5/f} 0 {1/f})
SYMATTR InstName V14
SYMBOL voltage 1424 720 R0
WINDOW 3 45 46 Left 2
WINDOW 0 47 25 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value 215m
SYMATTR InstName V17
SYMBOL voltage 1632 720 R0
WINDOW 3 24 44 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE({-Vramp/20} {Vramp/20} 0 {0.5*tstop/2} {0.5*tstop/2} 0 {tstop/2})
SYMATTR InstName V18
SYMBOL voltage 3584 576 R0
WINDOW 3 -130 128 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({Vramp/2} {-Vramp/2} 0 {0.5/f} {0.5/f} 0 {1/f})
SYMATTR InstName V19
SYMBOL voltage 3680 576 R0
WINDOW 3 -130 128 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({Vramp/2} {-Vramp/2} {1/(f*N)} {0.5/f} {0.5/f} 0 {1/f})
SYMATTR InstName V20
SYMBOL cap 688 80 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C17
SYMBOL cap 496 80 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C18
SYMBOL cap 496 -128 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C19
SYMBOL cap 688 -128 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C20
SYMBOL cap 1216 -128 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C21
SYMBOL cap 1216 80 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C22
SYMBOL cap 1408 80 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C23
SYMBOL cap 1408 -128 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C24
SYMBOL cap 1968 80 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C25
SYMBOL cap 2704 80 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C29
SYMBOL cap 2704 -128 R0
WINDOW 3 24 56 Invisible 2
WINDOW 0 -11 0 Left 2
SYMATTR Value {Coss}
SYMATTR InstName C30
SYMBOL cap 2896 80 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C31
SYMBOL cap 2896 -128 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C32
SYMBOL ind2 4000 -80 R0
SYMATTR InstName LG
SYMATTR Value {LG}
SYMATTR Type ind
SYMBOL res 4000 16 R0
SYMATTR InstName R18
SYMATTR Value {RG}
SYMBOL ind2 3536 -96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L11
SYMATTR Value 20µ
SYMATTR Type ind
SYMATTR SpiceLine Rser=10m
SYMBOL cap 3664 -48 R0
SYMATTR InstName C5
SYMATTR Value 20n
SYMBOL cap 3744 -16 R0
SYMATTR InstName C6
SYMATTR Value 100n
SYMBOL cap 4096 -80 R0
SYMATTR InstName C33
SYMATTR Value 174p
SYMBOL res 3744 -128 R0
SYMATTR InstName R19
SYMATTR Value 20
SYMBOL ind2 3536 144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L12
SYMATTR Value 20µ
SYMATTR Type ind
SYMATTR SpiceLine Rser=10m
SYMBOL ind2 3392 -96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L13
SYMATTR Value 3m
SYMATTR Type ind
SYMATTR SpiceLine Rser=10m
SYMBOL ind2 3392 144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L14
SYMATTR Value 3m
SYMATTR Type ind
SYMATTR SpiceLine Rser=10m
SYMBOL cap 3840 160 R0
SYMATTR InstName C34
SYMATTR Value 10n
SYMBOL cap 3904 160 R0
SYMATTR InstName C35
SYMATTR Value 10n
SYMBOL res 1408 624 R0
WINDOW 3 38 66 Left 2
SYMATTR Value 10k
SYMATTR InstName R4
SYMBOL res 1616 624 R0
WINDOW 3 38 66 Left 2
SYMATTR Value 1m
SYMATTR InstName R17
SYMBOL voltage 3392 864 R0
WINDOW 3 -130 128 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({-Vramp/2} {Vramp/2} {td} {0.5/f} {0.5/f} 0 {1/f})
SYMATTR InstName V2
SYMBOL voltage 3488 864 R0
WINDOW 3 -130 128 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({-Vramp/2} {Vramp/2} {1/(f*N)+td} {0.5/f} {0.5/f} 0 {1/f})
SYMATTR InstName V3
SYMBOL voltage 3584 864 R0
WINDOW 3 -130 128 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({Vramp/2} {-Vramp/2} {td} {0.5/f} {0.5/f} 0 {1/f})
SYMATTR InstName V4
SYMBOL voltage 3680 864 R0
WINDOW 3 -130 128 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({Vramp/2} {-Vramp/2} {1/(f*N)+td} {0.5/f} {0.5/f} 0 {1/f})
SYMATTR InstName V5
SYMBOL bv 3888 848 R0
WINDOW 3 24 96 Invisible 2
SYMATTR InstName B1
SYMATTR Value V=(!((V(U)>=V(ramp1))+(V(U)>=V(ramp1_del)))-0.5)
SYMBOL bv 3792 848 R0
WINDOW 3 24 96 Invisible 2
SYMATTR InstName B2
SYMATTR Value V=(((V(U)>=V(ramp1))&(V(U)>=V(ramp1_del)))-0.5)
SYMBOL diode 2032 -64 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D14
SYMBOL cap 1968 -128 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C26
SYMBOL diode 2192 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D15
SYMBOL cap 2128 80 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C27
SYMBOL diode 2192 -80 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D16
SYMBOL cap 2128 -144 R0
WINDOW 3 24 56 Invisible 2
SYMATTR Value {Coss}
SYMATTR InstName C28
SYMBOL bv 4096 848 R0
WINDOW 3 24 96 Invisible 2
SYMATTR InstName B3
SYMATTR Value V=(!((V(U)>=V(ramp2))+(V(U)>=V(ramp2_del)))-0.5)
SYMBOL bv 4000 848 R0
WINDOW 3 24 96 Invisible 2
SYMATTR InstName B4
SYMATTR Value V=(((V(U)>=V(ramp2))&(V(U)>=V(ramp2_del)))-0.5)
SYMBOL bv 3888 576 R0
WINDOW 3 24 96 Invisible 2
SYMATTR InstName B5
SYMATTR Value V=(!((V(U)>=V(ramp3))+(V(U)>=V(ramp3_del)))-0.5)
SYMBOL bv 3792 576 R0
WINDOW 3 24 96 Invisible 2
SYMATTR InstName B6
SYMATTR Value V=(((V(U)>=V(ramp3))&(V(U)>=V(ramp3_del)))-0.5)
SYMBOL bv 4000 576 R0
WINDOW 3 24 96 Invisible 2
SYMATTR InstName B7
SYMATTR Value V=(((V(U)>=V(ramp4))&(V(U)>=V(ramp4_del)))-0.5)
SYMBOL bv 4096 576 R0
WINDOW 3 24 96 Invisible 2
SYMATTR InstName B8
SYMATTR Value V=(!((V(U)>=V(ramp4))+(V(U)>=V(ramp4_del)))-0.5)
SYMBOL res 1296 -368 R90
WINDOW 0 25 130 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value {Rcm_damp*2}
SYMBOL res 2784 -368 R90
WINDOW 0 25 130 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value {Rcm_damp*2}
SYMBOL res 576 -368 R90
WINDOW 0 25 130 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value {Rcm_damp*2}
SYMBOL res 2048 -368 R90
WINDOW 0 25 130 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value {Rcm_damp*2}
SYMBOL res 4000 112 R0
SYMATTR InstName R24
SYMATTR Value 100k
TEXT 440 888 Left 2 !.model MySwitch SW(Ron=0.006 Roff=1Meg Vt=0 Vh=0 Lser=0 Vser=0)\n.param Coss=1n\n.param td=100n
TEXT 16 616 Left 2 !.param f=50k\n.param N=4\n.param Vramp=8\n.param VDD=30\n.param C_PE=40n\n.param C_PE_ESR=10m
TEXT 328 488 Left 2 !.tran 0 {tstop} 0 10n
TEXT 3848 -208 Left 2 !.ic I(LG)=0\n.param LG=273u\n.param RG=0.3
TEXT 528 712 Left 2 !.param Kcm=0.995\n.param Lcm=1m\n.param Rcm_damp=10k\n.param Lcm_ESR=0.1
TEXT 528 600 Left 2 !Kcm1 L2 L3 {Kcm}\nKcm2 L6 L7 {Kcm}\nKcm3 L8 L9 {Kcm}\nKcm4 L4 L5 {Kcm}
TEXT 328 456 Left 2 !.param tstop=10m
TEXT 448 832 Left 2 ;MOSFETs are modeled with behvioral switches\nDefine Coss and dead time
TEXT 3376 -184 Left 2 !Kcm5 L13 L14 1
TEXT 2136 480 Left 2 ;DC power supplies with capacitance to earth
TEXT 1632 -384 Left 2 ;Cascaded bridges with common mode chokes
TEXT 3616 -352 Left 2 ;Load coil with output filter
TEXT 24 888 Left 2 !.param Cb1=39u\n.param Cb1_ESR=40m\n.param Cb2=1u
TEXT 528 536 Left 2 ;Common mode chokes with coupling factor,\nDamping resistance, and ESR
TEXT 24 800 Left 2 ;Bypass capacitors\nCb1 is an electrolytic type with ESR\nCb2 is a smaller cap with zero ESR
TEXT 24 560 Left 2 ;Set up switching frequency\nand supply voltages
TEXT 336 432 Left 2 ;Simulation setup
TEXT 3536 408 Left 2 ;Gate drive synthesis with dead time
TEXT 1456 448 Left 2 ;Control input u(t)
TEXT 1336 888 Left 2 ;Use static DC setpoint, or pulse waveform
